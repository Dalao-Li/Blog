<!--
 * @Description: 
 * @Version: 1.0
 * @Author: Li Yuanhao
 * @Email: dalao_li@163.com
 * @Date: 2021-03-08 09:36:50
 * @LastEditors: Li Yuanhao
 * @LastEditTime: 2021-03-14 22:23:29
-->
## 概念

Ansible是一个配置管理和应用部署工具.

Ansible可以去对服务器上(1-N台)的一些系统应用进行配置管理，更该部分参数.

Ansible可以去安装一个新的软件应用，或者是一组软件应用。
以上本质是在多设备按情况(判断循环)指定每台设备要执行的命令

## 安装

```sh
# 新增 epel-release 第三方套件来源
yum install -y epel-release

# 安装Ansible
yum install -y ansible
```

配置文件: /etc/ansible/ansible.cfg


## 简单测试

建立两个容器server1,server2,并用ansible对其进行控制

```sh
docker run -itd --name server1 -P chusiang/ansible-managed-node:ubuntu-14.04

```

修改/etc/ansible/ansible.cfg文件

```ini
[defaults]

# 档案路径
hostfile = hosts

# 被控端用户名
remote_user = docker

# 不询问是否加入密钥
host_key_checking = False
```

修改/etc/ansible/hosts

```sh
# [分组,组名]
[local]

server1 ansible_ssh_host=172.17.0.2 ansible_ssh_port=22 ansible_ssh_pass=docker

server2 ansible_ssh_host=172.17.0.3 ansible_ssh_port=22 ansible_ssh_pass=docker
```

| 参数             | 值         |
| ---------------- | ---------- |
| ansible_ssh_host | 远程主机IP |
| ansible_ssh_port | SSH port   |
| ansible_ssh_pass | SSH密码    |

控制所有受控主机输出

```sh
ansible all -m command -a 'echo Hello World!'
```

![](https://cdn.hurra.ltd/img/20210308100822.png)

