- [一、目的](#一目的)
- [二、环境](#二环境)
- [三、过程](#三过程)
  - [3.1 安装Docker](#31-安装docker)
  - [3.2 换源](#32-换源)
  - [3.3 拉取MySQL镜像](#33-拉取mysql镜像)
  - [3.4 拉取owncloud镜像](#34-拉取owncloud镜像)
  - [3.5 启动容器](#35-启动容器)
  - [3.6 初始配置](#36-初始配置)
- [四、运行结果](#四运行结果)
# 一、目的
利用上次搭建好的那台低成本服务器，搭建家用网盘(owncloud)  
本来准备再去废品站淘淘，看看能不能淘个内存条回来，但是最近疫情反弹，只好待在家了.....

# 二、环境
> - 服务器： CentOS 7 
> - IP地址：192.168.3.15
> - 软件： Docker


# 三、过程
ssh登录

![](http://cdn.hurra.ltd/img/20200618230102.png)

## 3.1 安装Docker

卸载旧版本Docker
```
yum remove $(rpm -qa | grep docker)
```
![](http://cdn.hurra.ltd/img/20200618230258.png)

设置yum源
```
yum install -y yum-utils device-mapper-persistent-data lvm2

yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
```
![](http://cdn.hurra.ltd/img/20200619072823.png)

安装Docker
```
# 查看Docker版本
yum list docker-ce --showduplicates | sort -r

# 安装Docker 18.03.6
yum install docker-ce-18.06.3.ce
```
![](http://cdn.hurra.ltd/img/20200619073127.png)
启动与设置开机自启
```
systemctl start docker

# 开机自启
systemctl enable docker
```
![](http://cdn.hurra.ltd/img/20200619194506.png)

## 3.2 换源
```
vi /etc/docker/daemon.json

```
增加
```
{
    "registry-mirrors":["https://registry.docker-cn.com"]
}
```
![](http://cdn.hurra.ltd/img/20200619195655.png)
重启Docker
```
systemctl restart docker
```

## 3.3 拉取MySQL镜像
```
docker pull mysql:5.7
```

## 3.4 拉取owncloud镜像
```
docker pull owncloud
```
![](http://cdn.hurra.ltd/img/20200619202143.png)

## 3.5 启动容器
启动MySQL容器
```
docker run -itd --name owncloud_mysql -e MYSQL_ROOT_PASSWORD=123 mysql:5.7
```
启动ownCloud
```
docker run -itd --name owncloud -p 80:80 --link owncloud_mysql:db  owncloud
```

## 3.6 初始配置

访问192.168.3.15

![](http://cdn.hurra.ltd/img/20200619202505.png)
配置

![](http://cdn.hurra.ltd/img/20200619204624.png)

# 四、运行结果
![](http://cdn.hurra.ltd/img/20200619210218.png)
![](http://cdn.hurra.ltd/img/20200619210302.png)

接下来就可以把小姐姐的视频传上去了

![](http://cdn.hurra.ltd/img/20200619210451.png)

---

![](http://cdn.hurra.ltd/img/赞赏码.png)
