## 说明

> 利用上次搭建好的那台低成本服务器,搭建家用网盘(owncloud)  
> 本来准备再去废品站淘淘,看看能不能淘个内存条回来,但是最近疫情反弹,只好待在家了.....

## 1.1 安装 Docker

SSH 登录

![](https://cdn.hurra.ltd/img/20200618230102.png)

卸载旧版本 Docker

```shell
yum remove $(rpm -qa | grep docker)
```

![](https://cdn.hurra.ltd/img/20200618230258.png)

设置 yum 源

```shell
yum install -y yum-utils device-mapper-persistent-data lvm2

yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
```

![](https://cdn.hurra.ltd/img/20200619072823.png)

安装 Docker

```shell
# 查看Docker版本
yum list docker-ce --showduplicates | sort -r

# 安装Docker 18.03.6
yum install docker-ce-18.06.3.ce
```

![](https://cdn.hurra.ltd/img/20200619073127.png)
启动与设置开机自启

```shell
systemctl start docker

# 开机自启
systemctl enable docker
```

![](https://cdn.hurra.ltd/img/20200619194506.png)

## 1.2 换源

```shell
vi /etc/docker/daemon.json

```

增加以下内容

```shell
{
    "registry-mirrors":["https://registry.docker-cn.com"]
}
```

![](https://cdn.hurra.ltd/img/20200619195655.png)

重启 Docker

```shell
systemctl restart docker
```

## 1.3 拉取镜像

拉取 MySQL 镜像

```
docker pull mysql:5.7
```

拉取 owncloud 镜像

```
docker pull owncloud
```

![](https://cdn.hurra.ltd/img/20200619202143.png)

## 1.4 启动容器

MySQL 容器

```shell
docker run -itd --name owncloud_mysql -e MYSQL_ROOT_PASSWORD=123 mysql:5.7
```

ownCloud 容器

```shell
docker run -itd --name owncloud -p 80:80 --link owncloud_mysql:db  owncloud
```

## 1.5 初始配置

访问 192.168.3.15

![](https://cdn.hurra.ltd/img/20200619202505.png)
配置

![](https://cdn.hurra.ltd/img/20200619204624.png)

## 1.6 运行结果

![](https://cdn.hurra.ltd/img/20200619210218.png)
![](https://cdn.hurra.ltd/img/20200619210302.png)

接下来就可以把小姐姐的视频传上去了

![](https://cdn.hurra.ltd/img/20200619210451.png)

---

![](https://cdn.hurra.ltd/img/收款码.png)
